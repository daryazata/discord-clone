(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{44:function(e,a,n){},55:function(e,a,n){e.exports=n(85)},60:function(e,a,n){},62:function(e,a,n){},76:function(e,a,n){},77:function(e,a,n){},78:function(e,a,n){},79:function(e,a,n){},80:function(e,a,n){},81:function(e,a,n){},83:function(e,a,n){},84:function(e,a,n){},85:function(e,a,n){"use strict";n.r(a);var t=n(0),c=n.n(t),l=n(19),r=n.n(l),s=(n(60),n(23)),i=n(24),o=Object(i.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,a){e.channelId=a.payload.channelId,e.channelName=a.payload.channelName}}}),m=o.actions.setChannelInfo,u=function(e){return e.app.channelId},d=function(e){return e.app.channelName},h=o.reducer,E=n(100),f=n(101),p=n(102),v=n(103),b=n(104),g=n(105);n(62);var _=function(e){var a=e.channelName;return c.a.createElement("div",{className:"chatHeader"},c.a.createElement("div",{className:"chatHeader__left"},c.a.createElement("h3",null,c.a.createElement("span",{className:"chatHeader__hash"},"#"),a," ")),c.a.createElement("div",{className:"chatHeader__right"},c.a.createElement(E.a,null),c.a.createElement(f.a,null),c.a.createElement(p.a,null)),c.a.createElement("div",{className:"chatHeader__right_right"},c.a.createElement("div",{className:"chatHeader__search"},c.a.createElement("input",{type:"text",placeholder:"Search"}),c.a.createElement(v.a,null)),c.a.createElement(b.a,null),c.a.createElement(g.a,null)))},N=n(106),j=n(107),O=n(108),S=n(109),I=n(26),y=n.n(I),w=y.a.initializeApp({apiKey:"AIzaSyC9QDU-MvyUBecmmbn6qK4VsJRJ0WaVbi0",authDomain:"discord-clone-e2dfe.firebaseapp.com",databaseURL:"https://discord-clone-e2dfe.firebaseio.com",projectId:"discord-clone-e2dfe",storageBucket:"discord-clone-e2dfe.appspot.com",messagingSenderId:"1043387033141",appId:"1:1043387033141:web:7670f2e379b36887df737c"}).firestore(),C=y.a.auth(),k=new y.a.auth.GoogleAuthProvider,z=w,H=(n(76),n(6)),B=Object(i.b)({name:"user",initialState:{user:null},reducers:{login:function(e,a){e.user=a.payload},logout:function(e){e.user=null}}}),D=B.actions,x=D.login,A=D.logout,J=function(e){return e.user.user},L=B.reducer;var U=function(){var e=Object(H.c)(u),a=Object(H.c)(d),n=Object(H.c)(J),l=Object(t.useState)(""),r=Object(s.a)(l,2),i=r[0],o=r[1];return c.a.createElement("div",{className:"chat__input"},c.a.createElement(N.a,{fontSize:"large"}),c.a.createElement("form",{onSubmit:function(a){a.preventDefault(),i&&(z.collection("channels").doc(e).collection("messages").add({timestamp:y.a.firestore.FieldValue.serverTimestamp(),message:i,user:n}),o(""))}},c.a.createElement("input",{value:i,disabled:!e,onChange:function(e){return o(e.target.value)},type:"text",placeholder:a?"message #".concat(a):""}),c.a.createElement("button",{disabled:!e,className:"chat__inputButton",type:"submit"},"Send message")),c.a.createElement("div",{className:"chat__inputIcons"},c.a.createElement(j.a,{fontSize:"large"}),c.a.createElement(O.a,{fontSize:"large"}),c.a.createElement(S.a,{fontSize:"large"})))},V=(n(77),n(117));n(78);var W=function(e){var a,n=e.message;return c.a.createElement("div",{className:"message"},c.a.createElement(V.a,{src:n.message.user.photo}),c.a.createElement("div",{className:"message__info"},c.a.createElement("h4",null,n.message.user.displayName,c.a.createElement("span",{className:"message__timestamp"},new Date(null===(a=n.message.timestamp)||void 0===a?void 0:a.toDate()).toLocaleString("de-DE"))),c.a.createElement("p",null,n.message.message.toString())))};var P=function(e){var a=e.messages.map((function(e){return c.a.createElement(W,{key:e.id,message:e})}));return c.a.createElement("div",{className:"chat__messages"},a)};n(79);var R=function(){var e=Object(H.c)(u),a=Object(H.c)(d),n=Object(t.useState)([]),l=Object(s.a)(n,2),r=l[0],i=l[1];return Object(t.useEffect)((function(){if(e){var a=z.collection("channels").doc(e).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return i(e.docs.map((function(e){return{id:e.id,message:e.data()}})))}));return function(){a()}}}),[e]),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat_scroll"},c.a.createElement(_,{channelName:a}),c.a.createElement(P,{messages:r})),c.a.createElement(U,null))},F=n(52),K=n.n(F),M=n(40),T=n.n(M);n(80),n(81);var q=function(e){var a=e.channel,n=Object(H.b)(),t=Object(H.c)(u),l=a.id===t?"sidebarChannel_selected":"sidebarChannel";return c.a.createElement("div",{className:l,onClick:function(){return n(m({channelId:a.id,channelName:a.channel.channelName}))}},c.a.createElement("h4",null,c.a.createElement("span",{className:"sidebarChannel__hash"},"#"),a.channel.channelName))},G=(n(44),n(110)),Q=n(111),$=n(112);var X=function(){return c.a.createElement("div",{className:"sidebar__voice"},c.a.createElement(G.a,{className:"sidebar__voiceIcon",fontSize:"large"}),c.a.createElement("div",{className:"sidebar__voiceInfo"},c.a.createElement("h3",null,"Voice Connected"),c.a.createElement("p",null,"Stream")),c.a.createElement("div",{className:"sidebar__voiceIcons"},c.a.createElement(Q.a,null),c.a.createElement($.a,null)))},Y=n(113),Z=n(114),ee=n(115);var ae=function(){var e=Object(H.c)(J);return c.a.createElement("div",{className:"sidebar__profile"},c.a.createElement(V.a,{className:"sidebar__profile__avatar",onClick:function(){return C.signOut()},src:e.photo}),c.a.createElement("div",{className:"sidebar__profileInfo"},c.a.createElement("h3",null,e.displayName)),c.a.createElement("div",{className:"sidebar__profileIcons"},c.a.createElement(Y.a,null),c.a.createElement(Z.a,null),c.a.createElement(ee.a,null)))};var ne=function(){var e=Object(t.useState)([]),a=Object(s.a)(e,2),n=a[0],l=a[1];Object(t.useEffect)((function(){var e=z.collection("channels").onSnapshot((function(e){return l(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}));return function(){e()}}),[]),console.log("channels: ",n);var r=n.map((function(e){return c.a.createElement(q,{key:e.id,channel:e})}));return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__top"},c.a.createElement("h3",null,"Clever Programmer"),c.a.createElement(T.a,null)),c.a.createElement("div",{className:"sidebar__channels"},c.a.createElement("div",{className:"sidebar__channelsHeader"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement(T.a,null),c.a.createElement("h4",null,"Text Channels")),c.a.createElement(K.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&z.collection("channels").add({channelName:e})},className:"sidebar__addChannel"})),c.a.createElement("div",{className:"sidebar__channelsList"},r)),c.a.createElement(X,null),c.a.createElement(ae,null))},te=n(116);n(83);var ce=function(){return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__logo"},c.a.createElement("img",{src:"https://www.podfeet.com/blog/wp-content/uploads/2018/02/discord-logo.png",alt:""})),c.a.createElement(te.a,{onClick:function(){C.signInWithPopup(k).catch((function(e){return alert(e.message)}))}},"Sign In"))};n(84);var le=function(){var e=Object(H.b)(),a=Object(H.c)(J);return Object(t.useEffect)((function(){C.onAuthStateChanged((function(a){console.log(a),e(a?x({uid:a.uid,photo:a.photoURL,email:a.email,displayName:a.displayName}):A())}))}),[e]),c.a.createElement("div",{className:"app"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement(ne,null),c.a.createElement(R,null)):c.a.createElement(ce,null))},re=Object(i.a)({reducer:{user:L,app:h}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(H.a,{store:re},c.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[55,1,2]]]);
//# sourceMappingURL=main.ad0546d4.chunk.js.map